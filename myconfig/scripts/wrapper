#!/usr/bin/env bash

## global environments
# used in machine set
HOST=$(hostname | cut -d. -f1)
# used in machine set
MACHINE_ID=$(cat /etc/machine-id)
# PALUDIS_CONFIG_DIR may be unset even in cave
PALUDIS_CONFIG_DIR=${PALUDIS_CONFIG_DIR:=/etc/paludis}

# /etc/paludis/myconfig/scripts
SCRIPT_FULL_PATH=$(dirname $(realpath $0))

# pass the script name along with the arguments
if [[ "$0" == *wrapper ]]; then
	# invoked as ./wrapper <action>
	${SCRIPT_FULL_PATH}/invoker.py "$@"
else
	# invoked as <action>.bash
	${SCRIPT_FULL_PATH}/invoker.py "$0" "$@"
fi
